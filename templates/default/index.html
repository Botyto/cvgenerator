<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{{ profile.name }} CV</title>
        <style>
            @font-face {
                font-family: "Lato";
                src: url(data:font/ttf;base64,{{ lato_base64 }}) format("ttf");
            }
            body {
                font-family: 'Lato', sans-serif;
                color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            html { background-color: #777; }
            body {
                background-color: white;
                color: {{ profile.text_color }};
                width: 186mm;
                margin: 2em auto;
                padding: 12mm;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
            }
            @media print {
                html { background-color: initial; }
                body {
                    background-color: initial;
                    width: initial;
                    margin: 0;
                    padding: 0;
                    box-shadow: none;
                }
            }
            a { color: {{ profile.text_color }}; text-decoration: none; }
            a:visited { color: {{ profile.text_color }}; }
            
            header { display: flex; flex-wrap: nowrap; justify-content: space-between; }
            header h1 { text-transform: uppercase; margin: 0; font-size: 2.5em; color: {{ profile.base_color }}; }
            header h2 { margin: 0; font-size: 1.5em; color: {{ profile.accent_color }}; }
            .intro { width: 100%; display: flex; flex-direction: column; }
            .details {
                display: flex; 
                flex-wrap: wrap; 
                column-gap: 4em; 
            }
            .details span{
                font-size: 14px; 
            }
            .details .with-icon { display: flex; min-width: 33%; align-items: center; }
            .details .with-icon span { font-weight: bold; }
            header img { width: 8em; height: 8em; border-radius: 100%; }

            .sections { display: flex; gap: 1em; }
            .sections .column:first-child {
                width: 62%;
            }
            .sections .column:nth-child(2) {
                width: 38%;
            }
            .section > h3 {
                font-size: 1.3em;
                margin: 3px 0 3px 0;
                text-transform: uppercase;
                border-bottom: 3px solid {{ profile.base_color }};
                color: {{ profile.base_color }};
            }
            .section { margin-bottom: 10px; }
            .section p { margin: 0; }
            .section ul { margin: 0 0 5px 0; padding-left: 0.5em; list-style: none; }
            .section ul li { padding-left: 10px; }
            .section ul li::marker { content: 'â€¢'; font-size: 0.6em; }
            .section .icon-stats { display: flex; gap: 1em; font-size: 0.9em; }

            .jobs > h3 {
                font-size: 1.3em;
                margin: 3px 0 3px 0;
                text-transform: uppercase;
                border-bottom: 3px solid {{ profile.base_color }};
                color: {{ profile.base_color }};
            }
            .jobs h5 { margin: 2px 0 2px 0; font-size: 1em; color: {{ profile.accent_color }}; }
            .icon-stats { margin: 4px 0 4px 0; }
            ul.skills { display: flex; padding-left: 0; flex-flow: row wrap; column-gap: 0.5em; }
            ul.skills li::marker { content: none; }
            ul.skills li { padding: 0.3em; border-bottom: solid 1px black; white-space: nowrap; font-weight: bold; }
            article + article {
                border-top: dashed 1px rgba(0, 0, 0, 0.248);
            }
            article > h3 {
                margin: 3px 0 3px 0; font-size: 1.2em; font-weight: normal; color: {{ profile.base_color }};
            }
            article > h5 {
                margin: 2px 0 2px 0; font-size: 1em; color: {{ profile.accent_color }};
            }
            article .with-icon, article .with-icon a, .section > p, article > div, ul {
               font-size: 14px;
            }

            @font-face {
                font-family: 'icons';
                src: url(data:font/woff;base64,{{ fontello_base64 }}) format('woff');
            }
            i {
                font-family: "icons";
                font-style: normal;
                color: {{ profile.accent_color }};
            }
            .icon-link:before { content: '\e800'; }
            .icon-location:before { content: '\e803'; }
            .icon-calendar:before { content: '\e804'; }
            .icon-phone:before { content: '\e805'; }
            .icon-linkedin:before { content: '\e80e'; }
            .icon-home:before { content: '\e80f'; }
            .icon-at:before { content: '\f1fa'; }

            .with-icon { display: flex; align-items: center; }
            .with-icon i { width: 1em; text-align: center; margin-right: 0.3em; }

            {{ profile.custom_css or "" }}
        </style>
    </head>
    <body>
        <header>
            <div class="intro">
                <h1>{{ profile.name }}</h1>
                <h2>{{ profile.title }}</h2>
                <section class="details">
                    {% if profile.email %}
                        <span class="with-icon">
                            <i class="icon-at"></i>
                            <span>{% module md(text=profile.email) %}</span>
                        </span>
                    {% end %}
                    {% if profile.phone %}
                        <span class="with-icon">
                            <i class="icon-phone"></i>
                            <span>{% module md(text=profile.phone) %}</span>
                        </span>
                    {% end %}
                    {% if profile.location %}
                        <span class="with-icon">
                            <i class="icon-location"></i>
                            <span>{% module md(text=profile.location) %}</span>
                        </span>
                    {% end %}
                    {% if profile.link %}
                        <span class="with-icon">
                            <i class="icon-link"></i>
                            <span>{% module md(text=profile.link) %}</span>
                        </span>
                    {% end %}
                </section>
            </div>
            {% if profile.has_photo %}
                <img src="{{ profile.photo_base64 }}" alt="{{ profile.name }}" class="photo">
            {% end %}
        </header>
        <div class="sections">
            {% for column, sections in profile.sections_by_column %}
                <div class="column">
                    {% for section in sections %}
                        {% module Template(section.TYPE + ".html", profile=profile, section=section) %}
                    {% end %}
                </div>
            {% end %}
        </div>
    </body>
</html>
